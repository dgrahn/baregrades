<!DOCTYPE html>
<html>
<head>
	<title>BareGrades</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
	<%= stylesheet_link_tag    "application", :media => "all" %>
	<%= javascript_include_tag "application" %>
	<%= csrf_meta_tags %>
</head>
<body>

<header class="main">
	<div>
		<div>
			<%= link_to "BareGrades", root_path, class:"brand" %>
			<div>
				<a class="btn" href="<%= account_path %>"><i class="icon-user"></i> <%= @current_user.first_name %></a>
				<a class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>
				<ul>
					<li><a href="<%= edit_user_path(@current_user) %>"><i class="icon-pencil"></i> Edit</a></li>
					<li><a href="<%= logout_path %>"><i class="icon-hand-left"></i> Log Out</a></li>
					
					<% if @current_user.is_administrator? %>
						<li class="divider"></li>
						<li><a href="#"><i class="icon-briefcase"></i> Admin</a></li>
					<% end %>
				</ul>
			</div>
		</div>
	</div>
</header>

<header id="content-head" class="<%= @current_user.theme ? @current_user.theme.css_class : "pond" %>">
	<div>
		<%= yield :head %>
	</div>
</header>


<nav id="page">
	<div>
		<%= yield :nav %>
	</div>
</nav>

<div id="content">
	<div>
		<aside class="span3">
			<nav class="nav nav-tabs nav-stacked">
				<li><%= link_to "Join a Course", courses_path %></li>
				<li><%= link_to "Create a Course", new_course_path %></li>
			</nav>
			<% if @current_user %>
				<h2>Courses</h2>
				<nav class="courses">
					<% @current_user.courses.each do |course| %>
						<a href="<%= course_path(course) %>">
							<% grade = course.user_grade(@current_user) %>
							<%= render "courses/gradeBlock", :grade => course.user_grade(@current_user), :course => course %>
							<%= course.name %>
						</a>
						<% if @course and course.id == @course.id %>	
							<% course.assignment_types.each do |assignment_type| %>
								<a href="<%= course_assignment_type_path(course, assignment_type) %>" class="assignment-type">
									<%= render "courses/gradeBlock", :grade => assignment_type.user_grade(@current_user), :course => course %>
									<%= assignment_type.name %>
								</a>
							<% end %>
						<% end %>
					<% end %>
				</nav>
			<% end %>
		</aside>
		<div class="span8 offset1">
			<% flash.each do |name, msg| %>
				<%= content_tag :div, msg, :id => "flash_#{name}" %>
			<% end %>

			<%= yield %>
		</div>
	</div>

	<footer>
		<!-- &copy; 2013 | <%= link_to "Privacy", privacy_path() %> -->
	</footer>
</div>

</body>
</html>
