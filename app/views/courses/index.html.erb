<% content_for :head do %>
	<h1>Courses</h1>
<% end %>
<% content_for :nav do %>
<% end %>

<h2>Schools</h2>
<ul>
<%
	School.all.each do |school|
		concat content_tag(:li, school.name)
	end
%>
	<li>End</li>
</ul>

<table class="table table-middle">
	<thead>
		<tr>
			<th></th>
			<th>Name</th>
			<th>Identifier</th>
			<th>Section</th>
			<th>School</th>
			<th>Professor</th>
			<th>Credits</th>
			<%=
				if @current_user.is_administrator?
					content_tag(:th, "# Users")
				end
			%>
		</tr>
	</thead>
	<tbody>
		<% @courses.each do |course| %>
			<tr>
				<td><%= link_to "Join", course_join_path(course), class:"btn btn-primary" %></td>
				<td class="span3"><%= course.name %></td>
				<td><%= course.identifier %></td>
				<td><%= course.section %></td>
				<td><%= course.school ? course.school.name : "" %></thd>
				<td><%= course.professor ? course.professor.name : "" %></td>
				<td><%= course.credits %></td>
				<% if @current_user.is_administrator? %>
					<td>
						<%= course.users.length %>
					</td>
					<td>
						<div class="dropdown">
							<a class="dropdown-toggle btn" data-toggle="dropdown" href="#">
								<i class="icon-chevron-down"></i>
							</a>
							<ul class="dropdown-menu">
								<%= li_to "Show", course %>
								<%= li_to "Edit", edit_course_path(course) %>
								<li class="divider"></li>
								<%= li_to "Destroy", course, :confirm => "Are you sure?", :method => :delete %>
							</ul>
						</div>
					</td>
				<% end %>
			</tr>
		<% end %>
	</tbody>
</table>

<br />

<%= link_to "Create New Course", new_course_path, :class => "button" %>
